<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8"/>
<title>View source for RaspberryPiLinux - base48</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"RaspberryPiLinux","wgTitle":"RaspberryPiLinux","wgCurRevisionId":2613,"wgRevisionId":0,"wgArticleId":427,"wgIsArticle":false,"wgIsRedirect":false,"wgAction":"edit","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":true,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"RaspberryPiLinux","wgRelevantArticleId":427,"wgRequestId":"YsI0f6RoSHG2B3zIC3YQ5wAAAAE","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.implement("user.options",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup","ext.smw.style","skins.vector.js"]);});</script>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=ext.smw.style|ext.smw.tooltip.styles&amp;only=styles&amp;skin=vector.css"/>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint,shared|mediawiki.sectionAnchor|mediawiki.skinning.interface|skins.vector.styles&amp;only=styles&amp;skin=vector.css"/>
<link rel="stylesheet" href="extensions/Base48/common.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector.css"/>
<script async="" src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="generator" content="MediaWiki 1.27.1"/>
<meta name="robots" content="noindex,nofollow"/>
<link rel="ExportRDF" type="application/rdf+xml" title="RaspberryPiLinux" href="./index.php%3Ftitle=Special:ExportRDF%252FRaspberryPiLinux&amp;xmlmime=rdf"/>
<link rel="shortcut icon" href="skins/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="base48 (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="api.php%3Faction=rsd"/>
<link rel="copyright" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-RaspberryPiLinux rootpage-RaspberryPiLinux skin-vector action-edit">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>

						<div class="mw-indicators">
</div>
			<h1 id="firstHeading" class="firstHeading" lang="en">View source for RaspberryPiLinux</h1>
									<div id="bodyContent" class="mw-body-content">
								<div id="contentSub">‚Üê <a href="RaspberryPiLinux.html" title="RaspberryPiLinux">RaspberryPiLinux</a></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="index.php%3Ftitle=RaspberryPiLinux&amp;action=edit.html#mw-head">navigation</a>, 					<a href="index.php%3Ftitle=RaspberryPiLinux&amp;action=edit.html#p-search">search</a>
				</div>
				<div id="mw-content-text"><p>You do not have permission to edit this page, for the following reasons:
</p>
<ul class="permissions-errors">
<li>The action you have requested is limited to users in the group: <a href="index.php?title=Base48:Users&amp;action=edit&amp;redlink=1" class="new" title="Base48:Users (page does not exist)">Users</a>.</li>
<li>You must confirm your email address before editing pages.
Please set and validate your email address through your <a href="./Special:Preferences.html" title="Special:Preferences">user preferences</a>.</li>
</ul>
<hr />
<p>You can view and copy the source of this page.
</p><textarea readonly="" accesskey="," id="wpTextbox1" cols="80" rows="25" style="" lang="en" dir="ltr" name="wpTextbox1">{{Project
 |name=Perfect RaspberryPi support in Linux mainline
 |wikiPageName=RaspberryPiLinux
 |image=RaspberryPi.png
 |founder=[[User:Klubko]]
 |coops=
 |status=active
 |tags=sw,coops
 |shortdesc=Perfect RaspberryPi support in Linux mainline
 |created=2013-04-07
 |arch=Broadcom BCM2835
 |github=hackerspace/rpi-linux
}}

== Introduction ==

Raspberry Pi devices are shipped with modified Linux kernel, that adds support for Broadcom BCM2835 (known as BCM2708 there) which is what most distributions use.
They seldom rebase it on newer kernels and don't enjoy quality control mainline Linux does.

Currently (as of 3.9 rc), mainline Linux contains a platform driver and few device drivers (serial tty works), there many device drivers are left out.

== Making it work ==

Start out with a working Linux installation (be it [http://zenit.senecac.on.ca/wiki/index.php/Raspberry_Pi_Fedora_Remix_18 Fedora] or [http://www.raspberrypi.org/downloads Raspbian] (recommended)).

You'll very likely need to hook up a [http://elinux.org/RPi_Serial_Connection serial console].

=== Tool chain ===

ARM cross-compiler:

 &lt;nowiki>
# yum -y install gcc-arm-linux-gnu&lt;/nowiki>

=== Boot loader ===

Mainline Linux's RPi support it built around device tree; therefore you need DT capable bootloader to boot it, such as Das U-Boot. Install it by replacing kernel.img with it.

 &lt;nowiki>
$ git clone git://git.denx.de/u-boot.git
$ cd u-boot
$ make CROSS_COMPILE=arm-linux-gnu- ARCH=arm rpi_b_config
$ make CROSS_COMPILE=arm-linux-gnu- ARCH=arm -j666
$ cp u-boot.bin /media/rpi-boot/kernel.img&lt;/nowiki>

U-Boot will execute boot.scr.uimg, which should load kernel and the flattened device-tree image. Create it:

 &lt;nowiki>
$ cat >>/media/rpi-boot/uboot.scr
set bootargs 'console=tty0 console=ttyAMA0,115200 root=/dev/mmcblk0p2'
fatload ${devtype} ${devnum}:1 ${fdt_addr_r} fdt
fdt addr ${fdt_addr_r}
fdt resize
fdt chosen
fatload ${devtype} ${devnum}:1 ${loadaddr} zImage
bootz ${loadaddr} - ${fdt_addr_r}
^D
$ mkimage -T script -d /media/rpi-boot/boot.scr /media/rpi-boot/boot.scr.uimg
&lt;/nowiki>

=== Kernel and FDT image ===

 &lt;nowiki>
$ git clone git@github.com:hackerspace/rpi-linux.git
$ cd rpi-linux
$ make CROSS_COMPILE=arm-linux-gnu- ARCH=arm bcm2835_defconfig
$ make CROSS_COMPILE=arm-linux-gnu- ARCH=arm zImage fdt
$ cp arch/arm/boot/zImage /media/rpi-boot/
$ cp arch/arm/boot/dts/bcm2835-rpi-b.dtb /media/rpi-boot/fdt&lt;/nowiki>

== Getting involved ==

Join the [http://lists.infradead.org/pipermail/linux-rpi-kernel/ list].

=== Documents ===

* Linux Device Drivers, 3rd. edition
** PDF [http://lwn.net/Kernel/LDD3/]
** HTML [http://www.makelinux.net/ldd3/], [http://v3.sk/~lkundrak/ldd3/html]
** Epub [http://v3.sk/~lkundrak/ldd3/ldd3.epub], [[Media:ldd3.epub.gz]]
* [http://www.raspberrypi.org/wp-content/uploads/2012/02/BCM2835-ARM-Peripherals.pdf Broadcom BCM2835 peripheral handbook]
* [https://github.com/raspberrypi/firmware/wiki/Mailbox-property-interface VideoCore Mailbox IPC]

=== Useful links ===

* [https://github.com/hackerspace/rpi-linux Our tree]
* [http://lists.infradead.org/pipermail/linux-rpi-kernel/ The list]
* [https://github.com/swarren/linux-rpi Stephen Warren's tree]
* [https://github.com/raspberrypi/linux Broadcom tree], port from here

== Status ==

{| class="wikitable"
 ! Hardware
 ! Status
 |-
 | Board
 | Mainline
 |-
 | USB (DWC-OTG)
 | In staging/crap tree; needs poweron via mailbox in u-boot
 |-
 | Random number generator
 | Done, in 3.10
 |-
 | Watchdog
 | Queued for 3.11
 |-
 | Mailbox
 | WIP
 |-
 | Watchdog
 | WIP
 |-
 | Mailbox
 | WIP
 |-
 | Thermal
 | WIP
 |-
 | Sensors
 | WIP
 |-
 | Framebuffer
 | WIP; simplefb configured by u-boot in review
 |-
 | VHCIQ
 | Needs work [https://github.com/hackerspace/rpi-linux/tree/lr-vchiq]
 |-
 | Sound
 | Needs work
 |-
 | Camera
 | Needs work
 |}
</textarea><div class="templatesUsed"><div class="mw-templatesUsedExplanation"><p>Templates used on this page:
</p></div><ul>
<li><a href="./Template:Project.html" title="Template:Project">Template:Project</a> (<a href="./index.php%3Ftitle=Template:Project&amp;action=edit.html" title="Template:Project">view source</a>) </li><li><a href="Template:ProjectCategoryTags" title="Template:ProjectCategoryTags">Template:ProjectCategoryTags</a> (<a href="index.php?title=Template:ProjectCategoryTags&amp;action=edit" title="Template:ProjectCategoryTags">view source</a>) </li><li><a href="Template:ProjectInfoBoxItem" title="Template:ProjectInfoBoxItem">Template:ProjectInfoBoxItem</a> (<a href="index.php?title=Template:ProjectInfoBoxItem&amp;action=edit" title="Template:ProjectInfoBoxItem">view source</a>) </li><li><a href="Template:ProjectInfoBoxItemDivider" title="Template:ProjectInfoBoxItemDivider">Template:ProjectInfoBoxItemDivider</a> (<a href="index.php?title=Template:ProjectInfoBoxItemDivider&amp;action=edit" title="Template:ProjectInfoBoxItemDivider">view source</a>) </li><li><a href="Template:Time" title="Template:Time">Template:Time</a> (<a href="index.php?title=Template:Time&amp;action=edit" title="Template:Time">view source</a>) </li></ul></div><p id="mw-returnto">Return to <a href="RaspberryPiLinux.html" title="RaspberryPiLinux">RaspberryPiLinux</a>.</p>
</div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="RaspberryPiLinux.html">RaspberryPiLinux</a>"					</div>
				<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>

			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-createaccount"><a href="index.php?title=Special:CreateAccount&amp;returnto=RaspberryPiLinux&amp;returntoquery=action%3Dedit" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="index.php?title=Special:UserLogin&amp;returnto=RaspberryPiLinux&amp;returntoquery=action%3Dedit" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
															<li  id="ca-nstab-main" class="selected"><span><a href="RaspberryPiLinux.html"  title="View the content page [c]" accesskey="c">Page</a></span></li>
															<li  id="ca-talk" class="new"><span><a href="index.php?title=Talk:RaspberryPiLinux&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t" rel="discussion">Discussion</a></span></li>
													</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<h3 id="p-variants-label">
							<span>Variants</span><a href="index.php%3Ftitle=RaspberryPiLinux&amp;action=edit.html#"></a>
						</h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
															<li id="ca-view"><span><a href="RaspberryPiLinux.html" >Read</a></span></li>
															<li id="ca-viewsource" class="selected"><span><a href="index.php%3Ftitle=RaspberryPiLinux&amp;action=edit.html"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
															<li id="ca-history" class="collapsible"><span><a href="index.php%3Ftitle=RaspberryPiLinux&amp;action=history.html"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
													</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<h3 id="p-cactions-label"><span>More</span><a href="index.php%3Ftitle=RaspberryPiLinux&amp;action=edit.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>

						<form action="index.php" id="searchform">
							<div id="simpleSearch">
							<input type="search" name="search" placeholder="Search" title="Search base48 [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="index.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id='p-Navigation' aria-labelledby='p-Navigation-label'>
			<h3 id='p-Navigation-label'>Navigation</h3>

			<div class="body">
									<ul>
						<li id="n-mainpage-description"><a href="index.html" title="Visit the main page [z]" accesskey="z">Main page</a></li><li id="n-portal"><a href="./Base48:Community_portal.html" title="About the project, what you can do, where to find things">Community portal</a></li><li id="n-currentevents"><a href="./Base48:Current_events.html" title="Find background information on current events">Current events</a></li><li id="n-recentchanges"><a href="./Special:RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="./Special:Random.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>					</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Organization' aria-labelledby='p-Organization-label'>
			<h3 id='p-Organization-label'>Organization</h3>

			<div class="body">
									<ul>
						<li id="n-Join-us"><a href="Join_us.html">Join us</a></li><li id="n-Space"><a href="Space.html">Space</a></li><li id="n-About"><a href="About.html">About</a></li><li id="n-Meetings"><a href="Meetings.html">Meetings</a></li><li id="n-Equipment"><a href="Equipment.html">Equipment</a></li>					</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
			<h3 id='p-tb-label'>Tools</h3>

			<div class="body">
									<ul>
						<li id="t-whatlinkshere"><a href="Special:WhatLinksHere/RaspberryPiLinux" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special:RecentChangesLinked/RaspberryPiLinux" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="./Special:SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-info"><a href="index.php%3Ftitle=RaspberryPiLinux&amp;action=info.html" title="More information about this page">Page information</a></li>					</ul>
							</div>
		</div>
				</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="Base48:Privacy_policy" title="Base48:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="./Base48:About.html" title="Base48:About">About base48</a></li>
											<li id="footer-places-disclaimer"><a href="Base48:General_disclaimer" title="Base48:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
											<li id="footer-copyrightico">
							<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution Share Alike" width="88" height="31"/></a>						</li>
											<li id="footer-poweredbyico">
							<a href="https://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="resources/assets/poweredby_mediawiki_132x47.png 1.5x, resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a><a href="https://www.semantic-mediawiki.org/wiki/Semantic_MediaWiki"><img src="extensions/SemanticMediaWiki/res/images/smw_button.png" alt="Powered by Semantic MediaWiki" width="88" height="31"/></a>						</li>
									</ul>
						<div style="clear:both"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.state({"user":"ready","user.groups":"ready"});mw.loader.load(["mediawiki.action.edit.collapsibleFooter","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"]);});</script>
<script src="extensions/Base48/common.js%3F303"></script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":377});});</script>
	</body>
</html>
