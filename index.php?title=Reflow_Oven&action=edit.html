<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8"/>
<title>View source for Reflow Oven - base48</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Reflow_Oven","wgTitle":"Reflow Oven","wgCurRevisionId":2881,"wgRevisionId":0,"wgArticleId":496,"wgIsArticle":false,"wgIsRedirect":false,"wgAction":"edit","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":true,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Reflow_Oven","wgRelevantArticleId":496,"wgRequestId":"YsI0j6D8hpq3OcymCVPoogAAAAM","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.implement("user.options",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup","ext.smw.style","skins.vector.js"]);});</script>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=ext.smw.style|ext.smw.tooltip.styles&amp;only=styles&amp;skin=vector.css"/>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint,shared|mediawiki.sectionAnchor|mediawiki.skinning.interface|skins.vector.styles&amp;only=styles&amp;skin=vector.css"/>
<link rel="stylesheet" href="extensions/Base48/common.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector.css"/>
<script async="" src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="generator" content="MediaWiki 1.27.1"/>
<meta name="robots" content="noindex,nofollow"/>
<link rel="ExportRDF" type="application/rdf+xml" title="Reflow Oven" href="./index.php%3Ftitle=Special:ExportRDF%252FReflow_Oven&amp;xmlmime=rdf"/>
<link rel="shortcut icon" href="skins/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="base48 (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="api.php%3Faction=rsd"/>
<link rel="copyright" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Reflow_Oven rootpage-Reflow_Oven skin-vector action-edit">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>

						<div class="mw-indicators">
</div>
			<h1 id="firstHeading" class="firstHeading" lang="en">View source for Reflow Oven</h1>
									<div id="bodyContent" class="mw-body-content">
								<div id="contentSub">‚Üê <a href="Reflow_Oven.html" title="Reflow Oven">Reflow Oven</a></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="index.php%3Ftitle=Reflow_Oven&amp;action=edit.html#mw-head">navigation</a>, 					<a href="index.php%3Ftitle=Reflow_Oven&amp;action=edit.html#p-search">search</a>
				</div>
				<div id="mw-content-text"><p>You do not have permission to edit this page, for the following reasons:
</p>
<ul class="permissions-errors">
<li>The action you have requested is limited to users in the group: <a href="index.php?title=Base48:Users&amp;action=edit&amp;redlink=1" class="new" title="Base48:Users (page does not exist)">Users</a>.</li>
<li>You must confirm your email address before editing pages.
Please set and validate your email address through your <a href="./Special:Preferences.html" title="Special:Preferences">user preferences</a>.</li>
</ul>
<hr />
<p>You can view and copy the source of this page.
</p><textarea readonly="" accesskey="," id="wpTextbox1" cols="80" rows="25" style="" lang="en" dir="ltr" name="wpTextbox1">{{Project
 |name=Reflow Oven
 |wikiPageName=Reflow_Oven
 |image=
 |founder=[[User:hexo]]
 |coops=
 |status=active
 |tags=hw
 |shortdesc=your cheapo PCB baker
 |created=2014-06-09
 |arch=AVR
}}

== Introduction ==

Reflow oven is a tool for fast automated soldering of [http://en.wikipedia.org/wiki/Surface-mount_technology SMT] components on PCB.

Cheapo variant could be made from old [http://en.wikipedia.org/wiki/Toaster toaster] since it's internals are de-facto all we need - oven with heating element! We strip it off original electronics and mechanics (such as springs) first. We're going to solder, not toast!
Now we can't even turn it on, so we'll add some sort of regulator, temperature sensor and logic.

== Description ==

=== Regulation ===

Our toster draws 860W of AC power. That makes for ~3.74A at 230V.

I've decided to go after semiconductors instead of relays. It promises much higher lifetime and very fine control of delivered power.

Triac of choice was BT136-600, rated for 600V and 4A which eventually should be enough. For safety reasons the triac will be triggered by MOC3020 optotriac. The power circuit is placed on separate hand-drawn PCB, with two connections - hot, load for 230V and gnd, +5V for control.
Power itself is regulated by waiting for mains power to cross zero as this is a start of a new 20ms cycle (50Hz). Then we'll wait some time between
0 - 20ms and send a trigger pulse. This causes optotriac to open and let current flow across main triac gate and open it until new cycle begins.

Zero crossing is sensed by external interrupt pin on ATMega48 driven by transistor connected to rectifier diode bridge.
The rest of circuit is powered through one more diode, so that it could be filtered and stabilized. Whole circuit is powered by 230-12V transformer.

There was a bug found in PCB creation software for triac package, so that board worked after second iteration which is featuring BT138-800 instead (12A, 800V).

[[File:Triac_reg_bad.jpg|200px|thumb|center|This version does not work - it has swapped A1 and A2 terminals on triac because of error in CAD library.]]

=== Temperature ===

PT100 has been chosen for it's high thermal range and very good precision. That unfortunately means that readout will be a bit more involved.

PT100 itself will be read out using a 4-wire-method. It will be placed between two 50k resistors. That limits current to approximately 50 micro amperes at 5V supply and it won't undergo any self heating due to high current. PT100's resistance change with temperature, so does voltage across it which is exactly what we're about to measure.
Each side of PT100 is connected using 2k resistors to a buffer amplifier whose output is then fed to difference amplifier with appropriately tuned gain.
Output is then buffered / amplified once more. This is finally connected to LTC2450 16-bit ADC providing us with SPI interface and allowing for about 0.015 Ohm resolution or about 0.024 deg. C (~14bits).

[[File:Adc_therm.png|900px|thumb|center|Temperature measurement using PT100 and ADC]]

=== User Interface ===

Oven is currently in mark zero phase. It is a prototype lacking temperature sensing. Ordinary potentiometer connected to mega's ADC is used to directly set trigger delay (and hence output power). Board writes debug information on USART.

Plan is to have one mega taking care of regulation itself while listening on USART for commands, which can be conveniently sent from anywhere.
Such as second MCU taking care of user interaction only - drawing on display, waiting for user input.
Regulation can be distributed this way across both mcu's. Leaving regulation mcu program very simple - only with PID, ramping, temperature (over SPI) and USART. With actual "baking recipes" implemented in ui mcu (then replayed as commands for reg. mcu).

=== Casing ===

Idea is to cut some wood pieces and use them. Oven itself is made of metal, so perhaps 4 cm spacer columns would be good enough for wood not getting too hot.

== Status ==

[[File:Reflow_mark_zero.jpg|600px|thumb|right|Shiny silvery box is an oven. White cable entering it from right bottom is temperature sensor connected to multimeter (in deg. C). At the bottom left there is breadboard with atmega48, usb-usart, spi adapter and potentiometer to set power. Board above that is AC regulator. Scope probes are connected to zero crossing detector and optotriac's trigger input.]]

Current prototype shows that oven can get very hot very rapidly (~400C in 30sec.) so that fine regulation is truely needed.

=== Tesing runs ===

* 10th June 2014
I did some pictures - [http://v3.sk/~hexo/hs/IMG_20140611_021922.jpg setup],
[http://v3.sk/~hexo/hs/IMG_20140611_021929.jpg populated board],
[http://v3.sk/~hexo/hs/IMG_20140611_022302.jpg board in the oven],
and [http://v3.sk/~hexo/hs/IMG_20140611_023503.jpg soldered result].
The board was over lit by UV and then etched way too much. We didn't care and used it even if it wasn't
going to work.

=== Done ===

* Power switching part on PCB with improvised connection to oven
* MCU is still on breadboard.

=== Missing ===

* temperature readout
* mcu board
* casing design
* ux design
* ramping functionality in regulator
</textarea><div class="templatesUsed"><div class="mw-templatesUsedExplanation"><p>Templates used on this page:
</p></div><ul>
<li><a href="./Template:Project.html" title="Template:Project">Template:Project</a> (<a href="./index.php%3Ftitle=Template:Project&amp;action=edit.html" title="Template:Project">view source</a>) </li><li><a href="Template:ProjectCategoryTags" title="Template:ProjectCategoryTags">Template:ProjectCategoryTags</a> (<a href="index.php?title=Template:ProjectCategoryTags&amp;action=edit" title="Template:ProjectCategoryTags">view source</a>) </li><li><a href="Template:ProjectInfoBoxItem" title="Template:ProjectInfoBoxItem">Template:ProjectInfoBoxItem</a> (<a href="index.php?title=Template:ProjectInfoBoxItem&amp;action=edit" title="Template:ProjectInfoBoxItem">view source</a>) </li><li><a href="Template:ProjectInfoBoxItemDivider" title="Template:ProjectInfoBoxItemDivider">Template:ProjectInfoBoxItemDivider</a> (<a href="index.php?title=Template:ProjectInfoBoxItemDivider&amp;action=edit" title="Template:ProjectInfoBoxItemDivider">view source</a>) </li><li><a href="Template:Time" title="Template:Time">Template:Time</a> (<a href="index.php?title=Template:Time&amp;action=edit" title="Template:Time">view source</a>) </li></ul></div><p id="mw-returnto">Return to <a href="Reflow_Oven.html" title="Reflow Oven">Reflow Oven</a>.</p>
</div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="Reflow_Oven.html">Reflow_Oven</a>"					</div>
				<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>

			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-createaccount"><a href="index.php?title=Special:CreateAccount&amp;returnto=Reflow+Oven&amp;returntoquery=action%3Dedit" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="index.php?title=Special:UserLogin&amp;returnto=Reflow+Oven&amp;returntoquery=action%3Dedit" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
															<li  id="ca-nstab-main" class="selected"><span><a href="Reflow_Oven.html"  title="View the content page [c]" accesskey="c">Page</a></span></li>
															<li  id="ca-talk" class="new"><span><a href="index.php?title=Talk:Reflow_Oven&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t" rel="discussion">Discussion</a></span></li>
													</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<h3 id="p-variants-label">
							<span>Variants</span><a href="index.php%3Ftitle=Reflow_Oven&amp;action=edit.html#"></a>
						</h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
															<li id="ca-view"><span><a href="Reflow_Oven.html" >Read</a></span></li>
															<li id="ca-viewsource" class="selected"><span><a href="index.php%3Ftitle=Reflow_Oven&amp;action=edit.html"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
															<li id="ca-history" class="collapsible"><span><a href="index.php%3Ftitle=Reflow_Oven&amp;action=history.html"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
													</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<h3 id="p-cactions-label"><span>More</span><a href="index.php%3Ftitle=Reflow_Oven&amp;action=edit.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>

						<form action="index.php" id="searchform">
							<div id="simpleSearch">
							<input type="search" name="search" placeholder="Search" title="Search base48 [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="index.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id='p-Navigation' aria-labelledby='p-Navigation-label'>
			<h3 id='p-Navigation-label'>Navigation</h3>

			<div class="body">
									<ul>
						<li id="n-mainpage-description"><a href="index.html" title="Visit the main page [z]" accesskey="z">Main page</a></li><li id="n-portal"><a href="./Base48:Community_portal.html" title="About the project, what you can do, where to find things">Community portal</a></li><li id="n-currentevents"><a href="./Base48:Current_events.html" title="Find background information on current events">Current events</a></li><li id="n-recentchanges"><a href="./Special:RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="./Special:Random.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>					</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Organization' aria-labelledby='p-Organization-label'>
			<h3 id='p-Organization-label'>Organization</h3>

			<div class="body">
									<ul>
						<li id="n-Join-us"><a href="Join_us.html">Join us</a></li><li id="n-Space"><a href="Space.html">Space</a></li><li id="n-About"><a href="About.html">About</a></li><li id="n-Meetings"><a href="Meetings.html">Meetings</a></li><li id="n-Equipment"><a href="Equipment.html">Equipment</a></li>					</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
			<h3 id='p-tb-label'>Tools</h3>

			<div class="body">
									<ul>
						<li id="t-whatlinkshere"><a href="Special:WhatLinksHere/Reflow_Oven" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special:RecentChangesLinked/Reflow_Oven" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="./Special:SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-info"><a href="index.php%3Ftitle=Reflow_Oven&amp;action=info.html" title="More information about this page">Page information</a></li>					</ul>
							</div>
		</div>
				</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="Base48:Privacy_policy" title="Base48:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="./Base48:About.html" title="Base48:About">About base48</a></li>
											<li id="footer-places-disclaimer"><a href="Base48:General_disclaimer" title="Base48:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
											<li id="footer-copyrightico">
							<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution Share Alike" width="88" height="31"/></a>						</li>
											<li id="footer-poweredbyico">
							<a href="https://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="resources/assets/poweredby_mediawiki_132x47.png 1.5x, resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a><a href="https://www.semantic-mediawiki.org/wiki/Semantic_MediaWiki"><img src="extensions/SemanticMediaWiki/res/images/smw_button.png" alt="Powered by Semantic MediaWiki" width="88" height="31"/></a>						</li>
									</ul>
						<div style="clear:both"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.state({"user":"ready","user.groups":"ready"});mw.loader.load(["mediawiki.action.edit.collapsibleFooter","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"]);});</script>
<script src="extensions/Base48/common.js%3F303"></script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":377});});</script>
	</body>
</html>
